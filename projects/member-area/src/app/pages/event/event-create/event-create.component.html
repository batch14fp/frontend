<pre>{{createEvents.value | json}}</pre>
<main>
  <div class="w-12 flex sm:flex-column lg:flex-row relative">
    <div class="w-2 hidden lg:block pt-4 px-4 top-0">
      <div class="w-6">
        <img class="w-full w-0" style="object-fit: contain !important;"
          src="../../../assets/images/wecommunity-logo.png" alt="logo wecommunity">
      </div>
      <div class="flex flex-column m-0 mt-6 gap-2" routerLink="/dashboard">
        <div class="text-900 flex hover:text-blue-600">
          <button
            class="text-900 px-1 py-2 border-round-md font-medium text-md border-none w-full text-left m-0 bg-white hover:bg-blue-50 hover:text-blue-600 cursor-pointer">
            <i class="pi pi-home px-2"></i>
            Home</button>
        </div>
        <div class="text-blue-600 flex" routerLink="/events">
          <button
            class="text-blue-600 px-1 py-2 border-round-md font-medium text-md border-none w-full text-left m-0 bg-blue-50 cursor-pointer">
            <i class="pi pi-calendar px-2"></i>
            Event</button>
        </div>
        <div class="text-900 flex hover:text-blue-600" routerLink="/course">
          <button
            class="text-900 px-1 py-2 border-round-md font-medium text-md border-none w-full text-left m-0 bg-white hover:bg-blue-50 hover:text-blue-600 cursor-pointer ">
            <i class="pi pi-book px-2"></i>
            Course
          </button>
        </div>
        <div class="text-600 flex border-bottom-1 border-gray-200 pb-4  hover:text-blue-600"
          routerLink="/member/article">
          <button
            class="text-600 px-1 py-2 border-round-md font-medium text-md border-none w-full text-left m-0 bg-white hover:bg-blue-50 hover:text-blue-600 cursor-pointer">
            <fa-icon class="text-gray-600 cursor-pointer px-2 text-blue-600" [icon]="faNewspaper">
            </fa-icon>
            Article
          </button>
        </div>
        <div class="flex flex-column mt-4">
          <div class="flex justify-content-between mb-3">
            <p>Upcoming Event</p>
            <div class="bg-blue-100 text-blue-600 border-circle w-1 h-1 align-self-center flex justify-content-center">
              <p class="font-semibold text-xs">{{upcomingEvents?.total}}</p>
            </div>
          </div>
          <div *ngIf="upcomingEvents" class="flex flex-column gap-4">
            <div *ngFor="let item of upcomingEvents.data" class="flex w-12 gap-4">
              <div class="flex flex-column bg-blue-50 w-3 align-content-center text-center px-2 py-1 border-round-md">
                <p class="font-semibold">{{item.startDate | date:'d'}}</p>
                <p class="font-light text-gray-600">{{item.startDate | date:'LLL'}}</p>
              </div>
              <div class="flex flex-column w-9">
                <p class="">{{turncate(item.title)}}</p>
                <div class="flex">
                  <fa-icon class="text-xs font-light text-gray-600 mr-2" [icon]="faPeopleGroup"></fa-icon>
                  <p class="text-xs font-light text-gray-600">{{item.totalParticipant}} people going</p>
                </div>
              </div>
            </div>
            <ng-container *ngIf="upcomingEvents && upcomingEvents.data.length > 3">
              <p class="text-blue-600 font-medium cursor-pointer hover:text-blue-800 mt-2" routerLink="/events">Show All
              </p>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
    <!-- Mobile Menu -->
    <div
      class="flex bg-white pt-2 justify-content-between border-top-1 border-gray-200 w-12 gap-4 px-4 md:hidden fixed bottom-0 z-5 justify-content-center align-content-center align-self-center">
      <div
        class="text-900 w-2 bg-white flex flex-column justify-content-center align-content-center hover:text-blue-600">
        <i class="pi pi-home align-self-center" style="font-size: x-large;"></i>
        <p class="align-self-center">
          Home</p>
      </div>
      <div
        class="text-blue-600  border-blue-600 border-bottom-3 w-2 bg-white flex flex-column justify-content-center align-content-center">
        <i class="pi pi-calendar px-2 align-self-center" style="font-size: x-large;"></i>
        <p class="align-self-center">Event</p>
      </div>
      <div
        class="text-900 w-2 bg-white flex flex-column justify-content-center align-content-center hover:text-blue-600">
        <i class="pi pi-book px-2 align-self-center" style="font-size: x-large;"></i>
        <p class="align-self-center">Course</p>
      </div>
      <div class="text-900 w-2 bg-white flex flex-column justify-content-center align-content-center">
        <fa-icon class="text-gray-600 align-self-center cursor-pointer hover:text-blue-600" size="xl"
          [icon]="faNewspaper"></fa-icon>
        <p class="align-self-center">Article</p>
      </div>
    </div>
    <div class="lg:w-10 sm:mb-6 md:mb-0 sm:w-12 bg-gray-100 border-round-bottom-xl">
      <div class="navbar pt-1 bg-white w-12 justify-content-end flex pr-4 h-3rem align-content-center gap-4">
        <ng-container *ngIf="memberStatus === memberReguler">
          <button
            class="bg-red-600 hover:bg-red-700 text-white px-2 cursor-pointer h-10 border-round-md border-none align-self-center"
            style="height: 30px!important;" routerLink="/subscription">Upgrade</button>
        </ng-container>
        <app-tiered-menu [model]="accountMenu">
          <ng-template #content>
            <div *ngIf="!imageIdProfile"
              class="border-circle cursor-pointer align-self-center bg-blue-400 hover:bg-blue-500 flex justify-content-center align-content-center"
              style="width: 38px;height: 38px">
              <p class=" text-white font-medium text-xl align-self-center align-content-center text-center">
                {{fotoName(fullNameLogin)}}</p>
            </div>
            <div *ngIf="imageIdProfile" class="ImageProfile">
              <img src="http://localhost:2121/files/{{imageIdProfile}}" class=" align-self-center"
                style="width: 42px;height: 42px; object-fit: contain;border-radius: 50%;" alt="Avatar" />
            </div>
          </ng-template>
        </app-tiered-menu>
      </div>
      <div>
        <form [formGroup]="createEvents" (ngSubmit)="onCreateEvents()" class="w-12 flex justify-content-center">
          <div class="sm:w-12 md:w-11 flex flex-column">
            <div class="w-full bg-white border-round-md w-full py-2 mt-4">
              <p class="font-medium text-xl text-center">Create New Event</p>
            </div>
            <div class="w-full border-round-md w-full py-2 mt-2 flex justify-content-end">
              <button type="submit"
                class="bg-blue-600 w-fit border-none border-round-md cursor-pointer px-4 hover:bg-blue-800 py-2 text-white">Save</button>
            </div>
            <div class="flex sm:flex-column md:flex-row  my-2 gap-4">
              <div class="md:w-6 sm:w-12 bg-white px-3 py-3 border-round-md flex flex-column gap-3">
                <div class="flex flex-column">
                  <p class="text-sm font-medium">Upload Cover Image<span class="text-red-400"
                      pTooltip="This field is required">*</span></p>
                  <!-- <p-fileUpload #file mode="basic" name="myfile[]" [showUploadButton]="false" [showCancelButton]="false"
                    [multiple]="true" [maxFileSize]="1000000" id="formFileMultiple" (onSelect)="onUpload($event)"
                    formArrayName="imageCover" class="" style="width: 100%;">
                  </p-fileUpload> -->
                  <input type="file" #file class="hidden" (change)="onUpload($event)">
                  <img *ngIf="this.createEvents.value.imageCover!['contentFile']" [src]="imageSource" class="mt-2"
                    alt="Image Source">
                  <button *ngIf="this.createEvents.value.imageCover!['contentFile']" (click)="onRemoveImageCover()"
                    class="bg-red-600 mt-4 cursor-pointer hover:bg-red-700  text-white border-round-md font-medium  text-sm py-2 border-1 border-red-600 border-none">Remove</button>
                  <div *ngIf="!imageSource" (click)="file.click()" class="w-full border-round-md border-dashed border-gray-500 surface-overlay mt-2 border-1 h-4rem
                  flex justify-content-center align-content-center cursor-pointer hover:bg-gray-100">
                    <i class="pi pi-camera px-2 py-2 align-self-center relative text-800" style="font-size: 16px;">
                    </i>
                  </div>
                </div>
                <div class="flex flex-column w-full">
                  <label for="title" class="text-sm font-medium">Title<span class="text-red-400"
                      pTooltip="This field is required">*</span></label>
                  <input formControlName="title" placeholder="ex: Build Microservice App" type="text" id="title"
                    pInputText />
                </div>
                <div class="bg-white border-round-md flex justify-content-between w-12 gap-4">
                  <div class="flex flex-column w-6">
                    <label for="title" class="text-sm font-medium">Start Date<span class="text-red-400"
                        pTooltip="This field is required">*</span></label>
                    <p-calendar formControlName="startDateEvent" [showTime]="true" [minDate]="today" styleClass="w-full"
                      dateFormat="yy-mm-dd"></p-calendar>
                  </div>
                  <div class="flex flex-column w-6">
                    <label for="title" class="text-sm font-medium">End Date<span class="text-red-400"
                        pTooltip="This field is required">*</span></label>
                    <p-calendar formControlName="endDateEvent" [showTime]="true" [minDate]="startDate"
                      styleClass="w-full" dateFormat="yy-mm-dd"></p-calendar>
                  </div>
                </div>


                <div class="flex flex-column w-full">
                  <label for="title" class="text-sm font-medium">Price<span class="text-red-400"
                      pTooltip="This field is required">*</span></label>
                  <p-inputNumber formControlName="price" inputId="integeronly" mode="currency" currency="IDR"
                    locale="id-ID" styleClass="w-full"> </p-inputNumber>
                </div>
                <div class="flex flex-column w-full">
                  <label for="title" class="text-sm font-medium">Description<span class="text-red-400"
                      pTooltip="This field is required">*</span></label>
                  <p-editor formControlName="description" [style]="{ height: '320px' }">
                    <ng-template pTemplate="header">
                      <span class="ql-formats">
                        <select class="ql-size">
                          <option value="small">Small</option>
                          <option selected></option>
                          <option value="large">Large</option>
                          <option value="huge">XLarge</option>
                        </select>
                      </span>
                      <span class="ql-formats">
                        <button type="button" class="ql-bold" aria-label="Bold"></button>
                        <button type="button" class="ql-italic" aria-label="Italic"></button>
                        <button type="button" class="ql-underline" aria-label="Underline"></button>
                        <button type="button" class="ql-list" aria-label="List" value='ordered'></button>
                        <button type="button" class="ql-list" aria-label="Bullet" value='bullet'></button>
                        <button type="button" class="ql-blockquote" aria-label="blockquote">
                        </button>
                      </span>
                    </ng-template>
                  </p-editor>
                  <!-- <p-editor formControlName="description" [style]="{'height':'320px'}"></p-editor> -->
                </div>
              </div>
              <div class="w-6 md:w-6 sm:w-12 flex flex-column gap-3">
                <div class="bg-white border-round-md p-3 flex flex-column justify-content-between w-12 gap-3">
                  <div class="flex flex-column w-full">
                    <label for="provider" class="text-sm font-medium">Provider<span class="text-red-400"
                        pTooltip="This field is required">*</span></label>
                    <input formControlName="provider" placeholder="ex: Google" type="text" id="title" pInputText />
                  </div>
                  <div class="flex flex-column w-full">
                    <label for="category" class="text-sm font-medium">Category<span class="text-red-400"
                        pTooltip="This field is required">*</span></label>
                    <p-dropdown formControlName="category" [options]="categories" optionLabel="categoryName"
                      [filter]="true" filterBy="categoryName" [showClear]="true" placeholder="Select a Category">
                      <ng-template pTemplate="selectedItem">
                        <div class="category-item category-item-value p-0 w-full" *ngIf="createEvents.value">
                          <div class="">{{createEvents.value.category!['categoryName']}}</div>
                        </div>
                      </ng-template>
                      <ng-template let-category pTemplate="item">
                        <div class="category-item p-0 ">
                          <div class="p-0">{{category.categoryName}}</div>
                        </div>
                      </ng-template>
                    </p-dropdown>
                  </div>
                  <div class="flex flex-column w-full">
                    <label for="title" class="text-sm font-medium">Location<span class="text-red-400"
                        pTooltip="This field is required">*</span></label>
                    <textarea formControlName="location" placeholder="ex: Jl.Jendral Sudirman No.123" [rows]="5"
                      [cols]="30" pInputTextarea [autoResize]="true"></textarea>
                  </div>
                  <div class="flex flex-column border-1 p-4 border-gray-200 border-round-md">
                    <div for="title" class="text-sm font-medium">Create Voucher <span
                        class="text-xs text-gray-400 mb-2">(Optional)</span></div>
                    <div class="flex flex-column w-full gap-3">
                      <div class="flex flex-column w-full">
                        <label for="provider" class="text-sm font-medium">Code</label>
                        <input formControlName="codeVoucher" style="text-transform: uppercase;" type="text" id="title"
                          pInputText />
                      </div>
                      <div class="flex flex-column w-12">
                        <label for="provider" class="text-sm font-medium">Limit</label>
                        <p-inputNumber formControlName="limit" inputId="integeronly" locale="id-ID" class="w-12"
                          styleClass="w-full">
                        </p-inputNumber>
                      </div>
                      <div class="flex flex-column w-12">
                        <label for="provider" class="text-sm font-medium">Expired Date</label>
                        <p-calendar formControlName="expiredDate" [showIcon]="true" [minDate]="today"
                          styleClass="w-full" dateFormat="yy-mm-dd">
                        </p-calendar>
                      </div>
                      <div class="flex flex-column w-12">
                        <label for="provider" class="text-sm font-medium">Discount</label>
                        <p-inputNumber formControlName="discount" inputId="percent" suffix=" %" styleClass="w-full">
                        </p-inputNumber>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
  <p-confirmDialog header="Confirmation" [style]="{width: '50vw'}" [baseZIndex]="10000"
    acceptButtonStyleClass="p-button-text" defaultFocus="reject"></p-confirmDialog>
</main>
